{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "schema_lpf_v2.0.json",
    "type": "FeatureCollection",
    "@context": "https://raw.githubusercontent.com/LinkedPasts/linked-places/master/linkedplaces-context-v1.1.jsonld",
    "title": "The Linked Places Schema",
    "additionalProperties": false,
    "required": [
        "@id",
        "type",
        "properties",
        "names"
    ],
    "definitions": {
        "when": {
            "type": "object",
            "properties": {
                "timespans": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/timespan"
                    }
                },
                "periods": {
                    "type": "array",
                    "title": "When->Periods",
                    "items": {
                        "$ref": "#/definitions/period"
                    }
                },
                "label": {
                    "type": "string",
                    "title": "When->Label"
                },
                "duration": {
                    "$ref": "#/definitions/duration"
                }
            }
        },
        "timespan": {
            "type": "object",
            "properties": {
                "start": {
                    "type": "string",
                    "format": "date",
                    "title": "Timespan->Start"
                },
                "end": {
                    "type": "string",
                    "format": "date",
                    "title": "Timespan->End"
                }
            },
            "required": [
                "start",
                "end"
            ]
        },
        "period": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "uri": {
                    "type": "string"
                }
            },
            "required": [
                "label"
            ]
        },
        "duration": {
            "type": "string",
            "title": "Duration",
            "examples": [
                "P1Y",
                "P2M"
            ],
            "pattern": "^[P][0-9]{1,2}[Y|M|D]$"
        },
        "citations": {
            "type": "array",
            "title": "Citations",
            "items": {
                "$ref": "#/definitions/citation"
            }
        },
        "citation": {
            "type": "object",
            "title": "Citation",
            "properties": {
                "@id": {
                    "type": [
                        "string",
                        "null"
                    ],
                    "title": "Citation->@id",
                    "examples": [
                        "http://foofah.org"
                    ]
                },
                "label": {
                    "type": "string",
                    "title": "Citation->Label",
                    "examples": [
                        "Blow, J. (1708)"
                    ],
                    "pattern": "^(.*)$"
                }
            }
        },
        "lang": {
            "type": "string",
            "title": "Language",
            "examples": [
                "en",
                "fr"
            ],
            "pattern": "^[a-z]{2}$"
        },
        "certainty": {
            "type": "string",
            "title": "Certainty",
            "enum": [
                "certain",
                "less-certain",
                "uncertain"
            ]
        }
    },
    "properties": {
        "type": {
            "$id": "#/properties/type",
            "type": "string",
            "title": "The Type Schema",
            "enum": [
                "Feature"
            ]
        },
        "@id": {
            "$id": "#/properties/@id",
            "type": "string",
            "title": "The @id Schema",
            "default": "",
            "examples": [
                "https://foofah.com"
            ],
            "pattern": "^(.*)$"
        },
        "properties": {
            "$id": "#/properties/properties",
            "type": "object",
            "title": "The Properties Schema",
            "required": [
                "title"
            ],
            "properties": {
                "title": {
                    "$id": "#/properties/properties/properties/title",
                    "type": "string",
                    "title": "Properties->Title",
                    "default": "",
                    "examples": [
                        "San Miguel"
                    ],
                    "pattern": "^(.*)$"
                },
                "ccodes": {
                    "$id": "#/properties/properties/properties/ccodes",
                    "type": "array",
                    "title": "Properties->Ccodes",
                    "items": {
                        "$id": "#/properties/properties/properties/ccodes/items",
                        "type": "string",
                        "title": "Properties->Ccodes->Items",
                        "default": "",
                        "examples": [
                            "CR"
                        ],
                        "pattern": "^([a-zA-Z]{2})$"
                    }
                },
                "fclasses": {
                    "type": "array",
                    "title": "TODO",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "names": {
            "$id": "#/properties/names",
            "type": "array",
            "title": "The Names Schema",
            "items": {
                "$id": "#/properties/names/items",
                "type": "object",
                "title": "Names->Items",
                "properties": {
                    "toponym": {
                        "$id": "#/properties/names/items/properties/toponym",
                        "type": "string",
                        "title": "Names->Items->Toponym",
                        "examples": [
                            "San Miguel"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "ethnonym": {
                        "$id": "#/properties/names/items/properties/ethnonym",
                        "type": "string",
                        "title": "Names->Items->Ethnonym",
                        "examples": [
                            "Lebenians"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "lang": {
                        "$ref": "#/definitions/lang"
                    },
                    "when": {
                        "$ref": "#/definitions/when"
                    },
                    "citations": {
                        "$ref": "#/definitions/citations"
                    }
                },
                "oneOf": [
                    {
                        "required": [
                            "toponym"
                        ]
                    },
                    {
                        "required": [
                            "ethnonym"
                        ]
                    }
                ],
                "additionalProperties": true
            }
        },
        "types": {
            "$id": "#/properties/types",
            "type": "array",
            "title": "The Types Schema",
            "items": {
                "$id": "#/properties/types/items",
                "type": "object",
                "title": "Types->Items",
                "properties": {
                    "label": {
                        "$id": "#/properties/types/items/properties/label",
                        "type": "string",
                        "title": "Types->Items->Label",
                        "default": "",
                        "examples": [
                            "village"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "identifier": {
                        "$id": "#/properties/types/items/properties/identifier",
                        "type": "string",
                        "title": "Types->Items->Identifier",
                        "default": "",
                        "examples": [
                            "aat:300008372"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "sourceLabels": {
                        "type": "array",
                        "title": "Source Labels",
                        "items": {
                            "type": "object",
                            "properties": {
                                "label": {
                                    "type": "string",
                                    "title": "Source Labels->Label",
                                    "examples": [
                                        "Pueblo"
                                    ],
                                    "pattern": "^(.*)$"
                                },
                                "lang": {
                                    "$ref": "#/definitions/lang"
                                }
                            },
                            "required": [
                                "label"
                            ]
                        }
                    },
                    "when": {
                        "$ref": "#/definitions/when"
                    }
                }
            }
        },
        "geometry": {
            "$id": "#/properties/geometry",
            "type": "object",
            "title": "The Geometry Schema",
            "required": [
                "type"
            ],
            "properties": {
                "type": {
                    "$id": "#/properties/geometry/properties/type",
                    "type": "string",
                    "enum": [
                        "GeometryCollection",
                        "Point",
                        "MultiPoint",
                        "LineString",
                        "MultiLineString",
                        "Polygon",
                        "MultiPolygon"
                    ],
                    "title": "Geometry->Type"
                },
                "geometries": {
                    "$id": "#/properties/geometry/properties/geometries",
                    "type": "array",
                    "title": "Geometries",
                    "items": {
                        "$id": "#/properties/geometry/properties/geometries/items",
                        "type": "object",
                        "title": "Geometries->Items",
                        "properties": {
                            "type": {
                                "$id": "#/properties/geometry/properties/geometries/items/properties/type",
                                "type": "string",
                                "title": "Geometries->Items->Type",
                                "enum": [
                                    "Point",
                                    "MultiPoint",
                                    "LineString",
                                    "MultiLineString",
                                    "Polygon",
                                    "MultiPolygon"
                                ]
                            },
                            "coordinates": {
                                "type": "array",
                                "items": {
                                    "type": "number"
                                }
                            },
                            "geowkt": {
                                "$id": "#/properties/geometry/properties/geometries/items/properties/geowkt",
                                "type": "string",
                                "title": "Geometries->Items->Geowkt",
                                "pattern": "^(.*)$"
                            },
                            "when": {
                                "$ref": "#/definitions/when"
                            },
                            "citations": {
                                "$ref": "#/definitions/citations"
                            },
                            "certainty": {
                                "$ref": "#/definitions/certainty"
                            }
                        }
                    }
                }
            }
        },
        "relations": {
            "$id": "#/properties/relations",
            "type": "array",
            "title": "The Relations Schema",
            "items": {
                "$id": "#/properties/relations/items",
                "type": "object",
                "title": "Relations->Items",
                "required": [
                    "relationType",
                    "relationTo",
                    "label"
                ],
                "properties": {
                    "relationType": {
                        "type": "string",
                        "examples": [
                            "gvp:broaderPartitive"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "relationTo": {
                        "type": "string",
                        "pattern": "^(.*)$"
                    },
                    "label": {
                        "type": "string",
                        "pattern": "^(.*)$"
                    },
                    "when": {
                        "$ref": "#/definitions/when"
                    },
                    "citations": {
                        "$ref": "#/definitions/citations"
                    },
                    "certainty": {
                        "$ref": "#/definitions/certainty"
                    }
                }
            }
        },
        "links": {
            "$id": "#/properties/links",
            "type": "array",
            "title": "The Links Schema",
            "items": {
                "$id": "#/properties/links/items",
                "type": "object",
                "title": "Links->Items",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "closeMatch",
                            "exactMatch",
                            "primaryTopicOf",
                            "subjectOf",
                            "seeAlso"
                        ]
                    },
                    "identifier": {
                        "type": "string"
                    }
                }
            }
        },
        "when": {
            "$ref": "#/definitions/when"
        },
        "descriptions": {
            "$id": "#/properties/descriptions",
            "type": "array",
            "title": "The Descriptions Schema",
            "items": {
                "$id": "#/properties/descriptions/items",
                "type": "object",
                "title": "Descriptions->Items",
                "required": [
                    "value"
                ],
                "properties": {
                    "@id": {
                        "$id": "#/properties/descriptions/items/properties/@id",
                        "type": "string",
                        "title": "Descriptions->Items->@id",
                        "examples": [
                            "https://en.wikipedia.org/wiki/Abingdon-on-Thames"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "value": {
                        "$id": "#/properties/descriptions/items/properties/value",
                        "type": "string",
                        "title": "Descriptions->Items->Value",
                        "examples": [
                            "...a historic market town and civil parish..."
                        ],
                        "pattern": "^(.*)$"
                    },
                    "lang": {
                        "$ref": "#/definitions/lang"
                    }
                }
            }
        },
        "depictions": {
            "$id": "#/properties/depictions",
            "type": "array",
            "title": "The Depictions Schema",
            "items": {
                "$id": "#/properties/depictions/items",
                "type": "object",
                "title": "Depictions->Items",
                "required": [
                    "@id",
                    "title",
                    "license"
                ],
                "properties": {
                    "@id": {
                        "$id": "#/properties/depictions/items/properties/@id",
                        "type": "string",
                        "title": "Depictions->Items->@id",
                        "examples": [
                            "https://commons.wikimedia.org/wiki/File:ThamesAtAbingdon.jpg"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "title": {
                        "$id": "#/properties/depictions/items/properties/title",
                        "type": "string",
                        "title": "Depictions->Items->Title",
                        "default": "",
                        "examples": [
                            "The River Thames at Abingdon, Oxfordshire"
                        ],
                        "pattern": "^(.*)$"
                    },
                    "license": {
                        "$id": "#/properties/depictions/items/properties/license",
                        "type": "string",
                        "title": "Depictions->Items->License",
                        "default": "",
                        "examples": [
                            "cc:by-sa/3.0/"
                        ],
                        "pattern": "^(.*)$"
                    }
                }
            }
        }
    }
}