{% extends "main/base.html" %}
{% load leaflet_tags %}
{% load static %}
{% block title %}<title>WHG Search</title>{% endblock %}
{% block extra_head %}
  <script src="{% static 'js/aliases.js' %}"></script>
  <script src="{% static 'js/parents.js' %}"></script>
  <link href="{% static 'webpack/maptiler_sdk.bundle.css' %}" rel="stylesheet" /> 
  <link href="{% static 'webpack/search.bundle.css' %}" rel="stylesheet" /> 
{% endblock %}

{% block content %}
  <div class="container-md">
	  <div id="search-bar" class="row bg-light py-2 position-relative">
	    <div class="col-4">
	      <span class="float-start fs-4">Search</span>
			</div>
	    <div id="d_input" class="col-8 ps-1">
	        <div id="input" class="w-75 input-group">
	            <input type="text" id="search-input" class="form-control" placeholder="Enter place name"
	                   aria-label="Search" aria-describedby="search-addon">
	            <span class="input-group-text" id="search-addon">
	                <a href="#" id="a_search"><i class="fas fa-search"></i></a>
	            </span>
	        </div>
	    </div>
	  </div>
	  <div id="search_content" class="row">
			<div id="search_left" class="col-4 p-2 bg-light">
				<div id="adv_options" class="hidden">
					<h5>Advanced options</h5>
			    <p class="mb-0"><span class="categories ms-1">place categories</span>
            <span class="ms-1 categories">
              <span class="me-1"><a id="check_toggle" href="#">clear all</a></span>
              <a id="filter_help" class="pointer" data-toggle="popover" title="Place categories"
                 data-content="" tabindex="0" data-trigger="focus"><i class="fas fa-question-circle linky"></i></a>
            </span>
          </p>
          <div id="adv_checkboxes" class="small mt-2 ps-1">
		        <p><input type="checkbox" id="cb_a" checked="checked" value="A"/>
			        <span for="cb_a"> Administrative entities (A)</span></p>
		        <p><input type="checkbox" id="cb_p" checked="checked" value="P"/>
			        <span for="cb_p"> Cities, towns, hamlets (P)</span></p>
		        <p><input type="checkbox" id="cb_s" checked="checked" value="S"/>
			        <span for="cb_s"> Sites, buildings, complexes (S)</span></p>
		        <p><input type="checkbox" id="cb_r" checked="checked" value="R"/>
			        <span for="cb_r"> Roads, routes, rail... (R)</span></p>
		        <p><input type="checkbox" id="cb_l" checked="checked" value="L"/>
			        <span for="cb_l"> Regions, landscape areas (L)</span></p>
		        <p><input type="checkbox" id="cb_t" checked="checked" value="T"/>
			        <span for="cb_t"> Terrestrial landforms (T)</span></p>
		        <p><input type="checkbox" id="cb_h" checked="checked" value="H"/>
			        <span for="cb_h"> Water bodies (H)</span></p>
          </div>
          <div id="filter_spatial">
            <p class="mb-0"><span class="categories ms-1">spatial</span>
              <span class="float-end">
              <a id="spatial_help" class="pointer" data-toggle="popover"
                 title="Spatial filter" data-content="" tabindex="0" data-trigger="focus">
              <i class="fas fa-question-circle linky"></i></a></span>
            </p>
            <input id="input_area" type="text" size="25" placeholder="Region, country, study area" />
            <input type="hidden" id="boundsobj" />
          </div>
				</div>
	      <div id="result_facets" class="p-1 bg-light hidden">
	        <h5>Filter Results</h5>
			    <div id="type_checkboxes"></div>
			    <div id="country_checkboxes" class="mt-2"></div>
	      </div>
	      <!-- Detail box -->
	      <div id="detail_box" class="p-1 mt-2 hidden">
	        <h5>Detail</h5>
	        <div id="detail" class="p-3 bg-light"></div>
	      </div>
	    </div>
			<div id="search_right" class="col-8 bg-lighteryellow">
				<div id="search_right_top" class="row p-1">
					<div id="map" class="col-9 bg-lighterblue p-2"></div>
					<div id="map_notes" class="col-3 bg-lightyellow p-2">legend? note?</div>
				</div>
				<div id="result_container" class="row p-1">
					<div id="search_results" class="col-12 bg-light p-2">
						<h6>Search in WHG</h6>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
					</div>
				</div>
			</div>
  </div>
<!-- Set up MapLibre map using Maptiler SDK -->
<script type="text/javascript">
    let mapParameters = {
        container: 'map',
        center: [10.2385, 29.8626],
        zoom: 0.1, // starting zoom
        minZoom: 0.1,
        maxZoom: 10,
        mapTilerKey: '{{ maptilerkey }}',
        controls: {
            layer: true,
            navigation: false,
            fullscreen: false,
            attribution: {
                open: false,
            },
            temporal: {
                fromValue: 1550,
                toValue: 1720,
                minValue: -2000,
                maxValue: 2100,
                open: false,
                includeUndated: true, // null | false | true - 'false/true' determine state of select box input; 'null' excludes the button altogether
                epochs: null,
                automate: null,
            }
        },
        styleFilter: [ 'OUTDOOR.DEFAULT' ], // Leave empty for full list of options, or include a single style to prevent selector inclusion
    }
</script>
<script type="module">
	import "{% static 'webpack/maptiler_sdk.bundle.js' %}";
    import "{% static 'webpack/search.bundle.js' %}";
</script>
{% endblock %}
