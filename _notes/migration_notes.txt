## notes in preparation for v2 -> v3 data migration

- Place, PlaceName, and CollDataset have new create_date fields
- 'created' field in PlaceLink and PlaceGeom now 'create_date'

option:
create empty migration file
  python manage.py makemigrations places --empty

then add to it:
from django.db import migrations

def populate_create_date(apps, schema_editor):
    Place = apps.get_model('places', 'Place')
    Dataset = apps.get_model('datasets', 'Dataset')

    for place in Place.objects.filter(create_date__isnull=True):
        dataset = Dataset.objects.get(id=place.dataset_id)
        place.create_date = dataset.create_date
        place.save()

class Migration(migrations.Migration):

    dependencies = [
        ('places', '000X_previous_migration'),  # replace with your previous migration
    ]

    operations = [
        migrations.RunPython(populate_create_date),
    ]